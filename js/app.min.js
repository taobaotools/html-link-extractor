function extract(){var a=document.getElementById("url").value;return""==a||isValidURL(a)?void(""!=a?("http"!=a.substring(0,4)&&(a="http://"+a),setHTML("message","Getting HTML at the given URL. Please wait..."),setDisplay("loading",!0),$.ajax({url:a,type:"GET",success:function(a){setDisplay("loading",!1),""==a.responseText?setHTML("message","URL couldn't be processed. Please extract by HTML."):helper(a.responseText)}})):helper(document.getElementById("content").value)):(setHTML("message","Please enter a valid URL!"),void(document.getElementById("url").value=""))}function helper(a){links=[];var b=document.getElementById("httpCheckbox").checked,c=document.getElementById("taobaoCheckbox").checked,d=document.getElementById("filter").value;if(d=d.toLowerCase(),matchHTML(a,b,d),b){for(var e=[],f=0;f<links.length;f++)"http"==links[f].substring(0,4)&&e.push(links[f]);links=e}if(""!=d){for(var g=[],h=0;h<links.length;h++)links[h].indexOf(d)!=-1&&g.push(links[h]);links=g}c&&(links=convertTaobao(links)),setHTML("message","Extracted "+links.length+linkOrLinks(links.length)),links.length>0&&setComponents()}function matchHTML(a){for(var b=0;b+5<a.length;b++)if("href="==a.substring(b,b+5)){var c=b+6;"'"!=a.charAt(c)&&'"'!=a.charAt(c)||(c=b+7);for(var d=c;d<a.length&&"'"!=a.charAt(d)&&'"'!=a.charAt(d);)d++;var e=a.substring(c,d);links.indexOf(e)>-1||links.push(e),matchHTML(a.substring(d+1,a.length));break}}function setComponents(){setDisplay("content",!1),setDisplay("urlText",!1),setDisplay("valid",!0),setDisplay("valid-copy",!0),setHTML("valid-copy","Copy to clipboard");for(var a="<h3>Extracted Links</h3>",b=[],c=0;c<links.length;c++)b.push('<a class="link" href=\''+links[c]+"' target='_blank'>"+links[c]+"</a>");setHTML("valid",a+b.join("")),setHTML("valid-hidden",b.join("<br>")),document.getElementById("actions").style.paddingTop="15px"}function setHTML(a,b){document.getElementById(a).innerHTML=b}function setDisplay(a,b){document.getElementById(a).style.display=b?"unset":"none"}function linkOrLinks(a){return 1==a?" link.":" links."}function reset(){document.getElementById("url").value="",document.getElementById("content").value="",document.getElementById("filter").value="",document.getElementById("filter").disabled=!1,document.getElementById("httpCheckbox").checked=!0,document.getElementById("taobaoCheckbox").checked=!1,setDisplay("loading",!1),setDisplay("urlText",!0),setDisplay("content",!0),setHTML("message",""),setDisplay("valid",!1),setDisplay("valid-copy",!1)}function taobaoChecked(){var a=document.getElementById("taobaoCheckbox").checked;a?(document.getElementById("filter").disabled=!0,document.getElementById("filter").value="taobao"):(document.getElementById("filter").disabled=!1,document.getElementById("filter").value="")}function boxClicked(a){a?document.getElementById("content").value="":document.getElementById("url").value=""}var links=[];